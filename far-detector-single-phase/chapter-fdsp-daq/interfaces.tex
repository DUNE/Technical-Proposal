
%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
\section{Interfaces (David Cussans \& Matt Graham)}
\label{sec:fdsp-daq-intfc}

\metainfo{5 Pages}

\fixme{Include an image of each interface in appropriate section.  Can maybe refer to Fig.~\ref{fig:daq-overview} but it currently lacks some of the interfaces.}

%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
\subsection{TPC Electronics}
\label{sec:fdsp-daq-intfc-elec}

Summarise TPC/DAQ interface

%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
\subsection{PD Electronics}
\label{sec:fdsp-daq-intfc-photon}

The interface between the Single Phase Photon Detection System(PDS)
and the DAQ is described in DUNE-doc-6727. The signal to noise ratio
of the SiPM signals is high enough to allow the data to be safely
zero-suppressed. This reduces the data flow so that a bandwidth of
8GBit/s per APA is sufficent to transfer the zero supressed data to
the DAQ, with an order of magnitude safety factor. The link from the
single phase cryostats to the CUC will be implemented as either eight
1000Base-SX links  or a single 10GBase-LR link per APA.

There is a single physical pathway between the PDS and the DAQ for
both data and information used for data selection. The first stage of
the DAQ selects trigger primitives from this data stream and forwards
them to the data selection system.

%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
\subsection{Offline Computing (Kurt Biery)}
\label{sec:fdsp-daq-intfc-fnal-cmptg}

Where the data goes after it leaves DAQ.

%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
\subsection{Slow Control}
\label{sec:fdsp-daq-intfc-ext}

Summarise the interface with slow control.


%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
\subsection{External Systems (Giles \& Alec)}
\label{sec:fdsp-daq-intfc-ext}

\fixme{Need to receive information on beam spills (Giles) , SNEWS (Alec).}

The DAQ will need to save data based on external triggers, for example:
for times around when the pulse of neutrinos from LBNF arrives at the
Far Detector; or if notice of an interesting astrophysical event is
given by SNEWS\cite{snews} or LIGO.  This could involve going back in
time to save data that has already been buffered (see
Sec.~\ref{sec:fdsp-daq-ltr}), or changing the trigger or zero
suppression criteria for data in the interesting time period.

\paragraph{Beam Trigger:} Giles' stuff including the new ways to
generate a predictive trigger?

\paragraph{Astrophysical Triggers:} The Supernova Early Warning System
(SNEWS) is a coincidence network of neutrino experiments which are
individually sensitive to the burst of neutrinos which would be observed
from a core-collapse supernova somewhere in our galaxy.  While DUNE
should be sensitive to such a burst on its own able to contribute to the
coincidence network (Sec.~\ref{sec:fdsp-daq-sel}) via a tcp socket,
being able to save data based on other observations adds an additional
chance to not miss saving this rare and valuable data.  A SNEWS alert is
formed when two or more neutrino experiments report a potential
supernova signal within \SI{10}{s}.  The earliest time in the
coincidence is then sent via running a script on the SNEWS server at BNL
provided by the experiment wishing to receive the alert.  The latency
from neutrino burst is set by the response time of the second fastest
detector to report to SNEWS: this could be as short as seconds, but
might be tens of seconds.  At latencies larger than \SI{10}{s}, full
data might not be available, but compressed data might writeable.

There are other astrophysical triggers available for occurrences which
DUNE might not sensitive to individually, but could be either rarely or
if taken as an ensemble.  Gravitational wave triggers will be available
(details being worked out during the current LIGO shutdown), as will
high energy photon transients, most notably gamma ray bursts.  In fact,
cooperation between LIGO/VIRGO, the Gamma Ray Coordinates Network
(GCN)\footnote{Described in detail at
  \url{https://gcn.gsfc.nasa.gov/gcn_describe.html}}, and a number of
automated telescopes via network sockets on the time scale of seconds
enabled the discovery that ``short/hard'' gamma ray bursts are caused by
colliding neutron stars\cite{kilonova}.
